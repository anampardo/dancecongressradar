<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>DanceCongressRadar - Eventos</title>
  <link rel="stylesheet" href="assets/css/main.css" />
	<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>

<body class="is-preload">
  <div id="wrapper">
      <header id="header"></header>
       <div id="main">
            <div class="inner">
                <h1>Iniciar sesión</h1>
                <form id="login-form">
                    <label>Email: <input type="email" id="email" required /></label><br />
                    <label>Contraseña: <input type="password" id="password" required /></label><br />
                    <button type="submit">Entrar</button>
                </form>
            </div>
        </div>

    <script>
        document.getElementById('login-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        const res = await fetch('http://localhost:3000/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            credentials: 'include',
            body: JSON.stringify({ email, password })
        });

        const resultado = await res.json();
        if (res.ok) {
            alert('Bienvenida');
            window.location.href = 'agregar_evento.html';
        } else {
            alert(resultado.error);
        }
        });
    </script>
    </div>
</body>
</html>
